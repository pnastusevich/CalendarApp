# Unit Tests

Этот каталог содержит юнит-тесты для основной логики приложения.

## Структура тестов

### WorkoutTests.swift
Тесты для модели `Workout`:
- Парсинг дат из строк
- Извлечение дня без времени (`dayOnly`)
- Проверка равенства тренировок
- Обработка невалидных дат

### WorkoutMetadataTests.swift
Тесты для модели `WorkoutMetadata`:
- Конвертация дистанции в километры
- Конвертация длительности в минуты
- Форматирование длительности (часы и минуты)
- Парсинг дат

### CalendarViewModelTests.swift
Тесты для `CalendarViewModel`:
- Группировка тренировок по датам
- Получение тренировок для конкретной даты
- Проверка наличия тренировок на дате
- Выбор даты и переключение месяцев
- Навигация по месяцам (предыдущий/следующий)
- Переход на сегодня
- Форматирование месяца и года
- Генерация дней календаря

### WorkoutDetailViewModelTests.swift
Тесты для `WorkoutDetailViewModel`:
- Преобразование данных пульса
- Вычисление максимального, минимального и среднего пульса
- Преобразование данных скорости
- Вычисление максимальной, минимальной и средней скорости
- Извлечение координат маршрута
- Обработка пустых данных

### UserDefaultsServiceTests.swift
Тесты для `UserDefaultsService`:
- Сохранение и получение строк
- Сохранение и получение данных
- Удаление объектов
- Работа с несколькими ключами

### ProfileViewModelTests.swift
Тесты для `ProfileViewModel`:
- Загрузка профиля из UserDefaults
- Сохранение профиля в UserDefaults
- Сохранение и загрузка даты рождения
- Установка и загрузка цветовой схемы (светлая/тёмная/системная)
- Преобразование между `ThemeOption` и `ColorScheme`
- Запрос разрешения на доступ к фото
- Обработка различных статусов разрешения фото

### ThemeOptionTests.swift
Тесты для `ThemeOption`:
- Преобразование из `ColorScheme`
- Преобразование в `ColorScheme`
- Все доступные варианты
- Локализованные названия

### MockPhotoLibraryService.swift
Mock-сервис для тестирования работы с фото:
- Имитация различных статусов разрешения
- Тестирование запросов разрешения

## Запуск тестов

1. Откройте проект в Xcode
2. Убедитесь, что тестовый target `CalendarAppTests` настроен и добавлен в проект
3. Нажмите `Cmd+U` для запуска всех тестов
4. Или выберите конкретный тест и нажмите кнопку запуска рядом с ним

## Настройка тестового target

Если тестовый target еще не создан:

1. В Xcode: File → New → Target
2. Выберите "iOS Unit Testing Bundle"
3. Назовите его `CalendarAppTests`
4. Убедитесь, что он связан с основным target `CalendarApp`
5. Добавьте файлы тестов в этот target

